import{h as C,r as w,S as n,f as r,g as o,o as I,j as s,a as i,c as b,b as u,w as c,d as v,n as N,e as E,u as S,l as m,P as Y}from"./index-77LWITA5.js";import{h as B}from"./moment-C5S46NFB.js";const D={class:"status overflow-x-auto"},V={__name:"status",setup($){C();const l=[{title:"Name",dataIndex:"name",width:150},{title:"category",dataIndex:"category_name",width:150},{title:"date time",dataIndex:"create_at",customRender:({record:e})=>B(e.create_at*1e3).format("YYYY-MM-DD HH:mm:ss")},{title:"price",dataIndex:"price"},{title:"status",dataIndex:"status"},{title:"Action",dataIndex:"action",customRender:({record:e})=>m("span",[m(Y,{title:"Are you sure to delete this record?",onConfirm:()=>_(e.id),onCancel:()=>console.log("Delete canceled")})])}];let d=w([]);const p=e=>{n.socket.emit("updateStatus",e.id),o.success("confirmation")},f=e=>{o.error("Click on No")};n.socket.on("newElon",()=>{a()}),n.socket.on("updateElon",()=>{a()});const _=e=>{r.delete("elon/delete/"+e).then(t=>{t.data.success?a():o.warning(`${t.data.message}`)})},a=()=>{r.get("elon/allElonAdmin").then(e=>{if(e.data)if(e.data.success){for(let t of e.data.data)t.name=`${t.name.substring(0,15)}....`;d.value=e.data.data}else o.warning(`${e.data.message}`)})};return I(()=>{a()}),(e,t)=>{const h=s("a-popconfirm"),x=s("a-button"),g=s("a-table");return i(),b("div",D,[u(g,{columns:l,"data-source":S(d),pagination:{pageSize:50},scroll:{x:l.length*150,y:400}},{bodyCell:c(({column:k,record:y})=>[k.dataIndex=="action"?(i(),v(x,{key:0,type:"primary"},{default:c(()=>[u(h,{title:"Do you want to change the status?","ok-text":"Yes","cancel-text":"No",onConfirm:A=>p(y),onCancel:f},{default:c(()=>t[0]||(t[0]=[N("a",{href:"#"},"tasdiqlash",-1)])),_:2},1032,["onConfirm"])]),_:2},1024)):E("",!0)]),_:1},8,["data-source","scroll"])])}}};export{V as default};
