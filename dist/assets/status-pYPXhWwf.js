import{u as w,r as C,h as E,S as a,x as I,p as s,o as d,a as b,j as i,q as c,l as v,b as N,f as q,k as S,s as u,P as Y,g as o,m}from"./index-Bnz_3vkv.js";import{h as B}from"./moment-C5S46NFB.js";const D={class:"status overflow-x-auto"},V={__name:"status",setup($){w();const l=[{title:"Name",dataIndex:"name",width:150},{title:"category",dataIndex:"category_name",width:150},{title:"date time",dataIndex:"create_at",customRender:({record:e})=>B(e.create_at*1e3).format("YYYY-MM-DD HH:mm:ss")},{title:"price",dataIndex:"price"},{title:"status",dataIndex:"status"},{title:"Action",dataIndex:"action",customRender:({record:e})=>u("span",[u(Y,{title:"Are you sure to delete this record?",onConfirm:()=>_(e.id),onCancel:()=>console.log("Delete canceled")})])}];let r=C([]);const p=async e=>{try{await a.updateElonStatus(e.id),o.success("E'lon tasdiqlandi!")}catch(t){o.error(t.message||"Tasdiqlashda xatolik")}},f=e=>{o.error("Click on No")},_=e=>{m.delete("elon/delete/"+e).then(t=>{t.data.success?n():o.warning(`${t.data.message}`)})},n=()=>{m.get("elon/allElonAdmin").then(e=>{if(e.data)if(e.data.success){for(let t of e.data.data)t.name=`${t.name.substring(0,15)}....`;r.value=e.data.data}else o.warning(`${e.data.message}`)})};return E(()=>{n(),a.socket.on("newElon",()=>{n()}),a.socket.on("updateElon",()=>{n()})}),I(()=>{a.socket.off("newElon"),a.socket.off("updateElon")}),(e,t)=>{const h=s("a-popconfirm"),x=s("a-button"),g=s("a-table");return d(),b("div",D,[i(g,{columns:l,"data-source":S(r),pagination:{pageSize:50},scroll:{x:l.length*150,y:400}},{bodyCell:c(({column:k,record:y})=>[k.dataIndex=="action"?(d(),v(x,{key:0,type:"primary"},{default:c(()=>[i(h,{title:"Do you want to change the status?","ok-text":"Yes","cancel-text":"No",onConfirm:A=>p(y),onCancel:f},{default:c(()=>t[0]||(t[0]=[N("a",{href:"#"},"tasdiqlash",-1)])),_:2},1032,["onConfirm"])]),_:2},1024)):q("",!0)]),_:1},8,["data-source","scroll"])])}}};export{V as default};
