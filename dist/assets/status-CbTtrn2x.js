import{h as C,r as w,S as n,f as d,g as o,o as I,j as s,a as r,c as b,b as i,w as c,d as N,n as v,e as E,u as S,l as m,P as Y}from"./index-B_p4t0Lo.js";import{h as B}from"./moment-C5S46NFB.js";const D={class:"status"},V={__name:"status",setup($){C();const u=[{title:"Name",dataIndex:"name",width:150},{title:"category",dataIndex:"category_name",width:150},{title:"date time",dataIndex:"create_at",customRender:({record:e})=>B(e.create_at*1e3).format("YYYY-MM-DD HH:mm:ss")},{title:"price",dataIndex:"price"},{title:"status",dataIndex:"status"},{title:"Action",dataIndex:"action",customRender:({record:e})=>m("span",[m(Y,{title:"Are you sure to delete this record?",onConfirm:()=>_(e.id),onCancel:()=>console.log("Delete canceled")})])}];let l=w([]);const p=e=>{n.socket.emit("updateStatus",e.id),o.success("confirmation")},f=e=>{o.error("Click on No")};n.socket.on("newElon",()=>{a()}),n.socket.on("updateElon",()=>{a()});const _=e=>{d.delete("elon/delete/"+e).then(t=>{t.data.success?a():o.warning(`${t.data.message}`)})},a=()=>{d.get("elon/allElonAdmin").then(e=>{if(e.data)if(console.log(e.data),e.data.success){for(let t of e.data.data)t.name=`${t.name.substring(0,15)}....`;l.value=e.data.data}else o.warning(`${e.data.message}`)})};return I(()=>{a()}),(e,t)=>{const h=s("a-popconfirm"),g=s("a-button"),x=s("a-table");return r(),b("div",D,[i(x,{columns:u,"data-source":S(l),pagination:{pageSize:50},scroll:{y:240}},{bodyCell:c(({column:k,record:y})=>[k.dataIndex=="action"?(r(),N(g,{key:0,type:"primary"},{default:c(()=>[i(h,{title:"Do you want to change the status?","ok-text":"Yes","cancel-text":"No",onConfirm:A=>p(y),onCancel:f},{default:c(()=>t[0]||(t[0]=[v("a",{href:"#"},"tasdiqlash",-1)])),_:2},1032,["onConfirm"])]),_:2},1024)):E("",!0)]),_:1},8,["data-source"])])}}};export{V as default};
